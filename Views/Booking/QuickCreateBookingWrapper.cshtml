@using System.Web.UI.WebControls
@using Aspose.Words.Lists
@using BootstrapVillas.Models
@model BootstrapVillas.Models.ViewModels.FinalBookingDetailViewModel
@{
    ViewBag.Title = "Get Booking Details";
    /*  Booking booking = ViewBag.aBooking;
      Customer customer = ViewBag.aCustomer;
      CustomerBankDetail bank = ViewBag.BankDetail;
      BookingExtraSelection bes = ViewBag.aBes;
  */



    int dynamicStepsTop = 3; //starts at 3
    int dynamicStepsBottom = 3;
    int latestBookingParticipant = 0;

    ViewBag.BookingIterator = 1;
    ViewBag.BESIterator = 1;


    int validatonBookingCountCurrent = 0;
    int validatonBESCountCurrent = 0;

    AjaxOptions options = new AjaxOptions
    {
        UpdateTargetId = "TopEditorWindow",
        InsertionMode = InsertionMode.Replace,
        LoadingElementId = "spinner",
        OnSuccess = "alert('Created!')"
    };
    

}
<div class="row-fluid">
    <div class="span10 offset1" id="section1">
        <!-- sub navigation with social media etc. -->

    </div>
</div>


<div class="row-fluid" style="border-bottom: 1px solid #ddd; margin-bottom: 20px;">
    <h2>Please confirm your booking details:</h2>
</div>


<div class="row-fluid">
    @using (Ajax.BeginForm("QuickCreateBooking", "Booking", FormMethod.Post, options, new {id = "form1"}))
    {

        <div class="row-fluid">
            <div class="span10 offset1">
                <div id="wizard" class="swMain">
                    @*   <ul>
                    <li>
                        <a href="#step-1" class="blueBg">
                            <label class="stepNumber">1</label>
                            <span class="stepDesc">
                                <css-decorator class="toTranslate">Step 1</css-decorator>
                                <br />
                                <small class="toTranslate">Booking</small>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="#step-2" class="blueBg">
                            <label class="stepNumber">2</label>
                            <span class="stepDesc">
                                <css-decorator class="toTranslate">Step 2</css-decorator>
                                <br />
                                <small class="toTranslate">Add participants</small>
                            </span>
                        </a>
                    </li>
                </ul>*@





                    @*ACTUAL CONTENT AREAS*@
                    <div class="row-fluid">
                        <div class="span12">
                            <div id="step-1" class="center">
                                <h2 class="StepTitle" class="toTranslate">Booking</h2>
                                @Html.Partial("~/Views/Booking/QuickCreateBooking.cshtml", new Booking())
                            </div>

                            <div id="step-2">
                                <h2 class="StepTitle" class="toTranslate">Booking Participant</h2>
                                @Html.Partial("~/Views/Booking/QuickCreateBookingParticipant.cshtml", new List<BookingParticipant>())
                            </div>

                            <input type="submit"/>



                        </div>
                    </div>
                </div>
            </div>
        </div>

    }
</div>

<script type="text/javascript">
    $(document).ready(function () {
        // $("#example-advanced-form").jWizard();
        $('#wizard').smartWizard({
            transitionEffect: 'fade',
            onFinish: onFinishCallback,
            onShowStep: leaveAStepCallback


        });


        $('#wizard').css('text-align', 'center');
        /*
                $("#bookingParticipantDiv0").addClass("test");

                $('#bookingparticipants[0].BookingParticipantFirstName').addClass("test");
                $('#bookingparticipants[0].BookingParticipantLastName').addClass("makeValid");

                $('#bookingparticipants[15].BookingParticipantFirstName').addClass("makeValid");
                $('#bookingparticipants[15].BookingParticipantLastName').addClass("makeValid");

                $('#bookingparticipants[30].BookingParticipantFirstName').addClass("makeValid");
                $('#bookingparticipants[30].BookingParticipantLastName').addClass("makeValid");*/

        /*        $('.selected').css('background', '#3498db');
                $('.selected').css('border', '#3498db');*/

        function onFinishCallback() {

            $('#form1').submit();

        }


        $(".buttonFinish").click(function () {

            var disabled = $(".buttonFinish").is(":disabled");

            if (disabled != false) {

                if ($('#form1').valid()) {
                    $('#form1').submit();
                }
            }

            //test for validation


        });


    });

   


    function DisableNext() {
        $("#wizard .buttonNext").hide();
    }


   /* $("#customerDiv").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#customerDiv .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);#1#
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });


    $("#customerBankDetailDiv").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#customerBankDetailDiv .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);#1#
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });*/


    $("#bookingDiv0").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#bookingDiv0 .makeValid');
        var isValid = true;

        test.each(function () {

            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });


    $("#bookingDiv1").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#bookingDiv1 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });


    $("#bookingDiv2").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#bookingDiv2 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });



    //parts


    $("#bookingParticipantDiv0").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#bookingParticipantDiv0 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });



    $("#BESDiv0").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#BESDiv0 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });



    $("#BESDiv1").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#BESDiv1 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });



    $("#BESDiv2").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#BESDiv2 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });


    $("#BESDiv3").on("click focus keypress change keyup blur", function (e) {

        $("#wizard .buttonNext").hide();
        $("label[generated='true']").remove();

        var test = $('#BESDiv3 .makeValid');
        var isValid = true;

        test.each(function () {
            /* alert(this.name);*/
            if ($(this).valid()) {

            } else {
                isValid = false;
            }

        });


        if (isValid == true) {
            $("#wizard .buttonNext").toggle();
        }

    });


    /*
        function RunBookingValidationScript(bookingDivName) {
            $(bookingDivName).on("change", function (e) {

                alert(bookingDivName);

                $("#wizard .buttonNext").hide();
                $("label[generated='true']").remove();

                var test = $(bookingDivName + ' .makeValid');
                var isValid = true;

                test.each(function () {
                    /* alert(this.name);#1#
                    if ($(this).valid()) {

                    } else {
                        isValid = false;
                    }

                });

                if (isValid == true) {
                    $("#wizard .buttonNext").toggle();
                }

            });
        }*/





    /*
     $(".buttonNext").on("click", function (e) {

            $(".buttonNext").preventDefault();
            alert('ok');


            var test = $('#customerDiv .makeValid');
            var isValid = true;
            test.each(function () {
                alert(this.name);
                if ($(this).valid()) {

                } else {
                    isValid = false;
                }

            });

            if (!isValid) {
                e.preventDefault();
            }

            });
    */


    function leaveAStepCallback(obj, context) {

        $('#bookingDiv0').click();
        $('#bookingDiv1').click();
        $('#bookingDiv2').click();
        $('#bookingDiv3').click();
        $('#bookingDiv4').click();

        $('#bookingParticipantDiv0').click();
        $('#bookingParticipantDiv1').click();
        $('#bookingParticipantDiv2').click();

        $('#BESDiv0').click();
        $('#BESDiv1').click();

     
    };


</script>


<script type="text/javascript">



     
        $('#BottomEditorWindow').hide();
        $('#TopEditorWindow').animate({ height: '100%' }, 500);



</script>
