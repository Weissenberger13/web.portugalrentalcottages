/*!
 * Curry currency conversion jQuery Plugin v0.7
 * https://bitbucket.org/netyou/curry-currency-ddm
 *
 * Copyright 2013, NetYou
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(c){c.fn.curry=function(t){var e="",l={},n=!1,g,f,p,k,q,h=c.extend({target:".price",change:!0,base:"USD",symbols:{}},t);this.each(function(){var a=c(this),b=a.attr("id"),m=a.attr("class"),b=""+(b?' id="'+b+'"':"")+(m?' class="curry-ddm '+m?" "+m:'"':"");e="<select"+b+"></select>";b=c(e).insertAfter(a);a.detach();g=g?g.add(b):b});var r=function(a){e="";g.each(function(){for(k in a)q=a[k],e+='<option value="'+k+'" data-rate="'+q+'">'+k+"</option>";c(e).appendTo(this)})};h.customCurrency?r(h.customCurrency):
n||c.ajax({url:"http://query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:'select * from yahoo.finance.xchange where pair="USDINR,USDEUR,USDCAD,USDGBP,USDILS"',format:"json",env:"store://datatables.org/alltableswithkeys"}}).done(function(a){a=a.query.results.rate;l[h.base]=1;for(var b=0,c=a.length;b<c;b++)f=a[b],p=f.Name.substr(f.Name.length-3),l[p]=+f.Rate;r(l);n=!0});if(h.change){var u=c.extend({USD:"&#36;",GBP:"&pound;",EUR:"&euro;",JPY:"&yen;"},h.symbols),s;c(document).on("change",this.selector,
function(){for(var a=c(h.target),b=c(this).find(":selected"),e=b.data("rate"),d,g=a.length,f=0;f<g;f++)$price=c(a[f]),d=$price.text(),d=Number(d.replace(/[^0-9\.]+/g,"")),$price.data("base-figure")?d=e*$price.data("base-figure"):($price.data("base-figure",d),d*=e),d=Number(d.toString().match(/^\d+(?:\.\d{0,2})?/)),s=u[b.val()]||b.val(),$price.html('<span class="symbol">'+s+"</span>"+d)})}return g}})(jQuery);